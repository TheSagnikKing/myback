import{r as a,b as j,j as t,y as E,as as w,M as F,m as d}from"./index-35bd031f.js";const N=()=>{const m=a.useRef(null),[p,h]=a.useState(""),[v,f]=a.useState(""),[k,y]=a.useState(!1),S=(e,o)=>{m.current.click(),h(e),f(o)};console.log(p),console.log(v);const A=async e=>{const o=e.target.files[0];console.log(o);const r=new FormData;r.append("id",v),r.append("advertisements",o),r.append("public_imgid",p),y(!0);try{const n=await d.put("/api/advertisement/updateAdvertisements",r,{headers:{"Content-Type":"multipart/form-data"}});console.log("update success:",n.data),alert("Image Update successfully"),h(""),f(""),y(!1),window.location.reload()}catch(n){console.error("Image upload failed:",n)}},C=async(e,o)=>{try{console.log(e),console.log(o),await d.delete("/api/advertisement/deleteAdvertisements",{data:{public_id:e,img_id:o}}),alert("Image deleted Successfully"),window.location.reload()}catch(r){console.log(r)}},[u,x]=a.useState(null);console.log(u);const s=j(e=>e.LoggedInMiddleware);console.log((s==null?void 0:s.user)&&(s==null?void 0:s.user[0].salonId));const[_,g]=a.useState(!1),D=async()=>{if(u!=null){g(!0);const e=new FormData,o=Number((s==null?void 0:s.user)&&(s==null?void 0:s.user[0].salonId));e.append("salonId",o);for(const r of u)e.append("advertisements",r);try{const r=await d.post("/api/advertisement/addAdvertisements",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload success:",r.data),x(null),alert("Image uploaded Successfully"),window.location.reload()}catch(r){console.error("Image upload failed:",r),g(!1)}}},[c,R]=a.useState([]),i=a.useRef(null);a.useEffect(()=>{i.current&&i.current.abort();const e=new AbortController;i.current=e;const o=e.signal;return(async()=>{const{data:n}=await d.post("/api/advertisement/getAdvertisements",{salonId:(s==null?void 0:s.user)&&(s==null?void 0:s.user[0].salonId)},{signal:o});console.log("adver",n),R(n==null?void 0:n.advertisements)})(),()=>{i.current.abort()}},[s==null?void 0:s.user]);const b=j(e=>e.color.darkmode);console.log("Darkmode dashboard",b);const l=b==="On";return t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsxs("div",{className:`sa-br-right_main_div ${l?"sa-br-right_main_div_dark":""}`,children:[t.jsxs("div",{className:"advertisement-header",children:[t.jsx("h3",{style:{color:l?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Advertisement"}),t.jsxs("div",{children:[t.jsx("input",{type:"file",multiple:!0,onChange:e=>x(e.target.files),style:{color:l?"var(--light-secondary-color)":"var(--dark-secondary-color)"}}),t.jsx("button",{onClick:D,style:{height:"3.5rem",width:"10rem",background:"#f1f6fc",boxShadow:"0px 0px 6px rgba(0,0,0,0.6)",cursor:"pointer",borderRadius:"5px",border:"none",fontSize:"1.2rem",color:l?"var(--light-secondary-color)":"var(--dark-secondary-color)",backgroundColor:l?"var(--dark-secondary-color)":"var(--light-secondary-color)"},children:_?t.jsx("h2",{children:"Loading"}):t.jsx("p",{style:{fontSize:"1.2rem",color:l?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Upload"})})]})]}),t.jsx("div",{className:`advertisement-container ${l?"advertisement-container_dark":""}`,children:c?c==null?void 0:c.map((e,o)=>t.jsxs("div",{style:{boxShadow:"0px 0px 6px white"},children:[t.jsx("img",{src:e.url,alt:""}),t.jsxs("div",{children:[k===!0?t.jsx("button",{children:"Ld"}):t.jsx("button",{onClick:()=>S(e.public_id,e._id),style:{border:"none",marginRight:"1rem"},children:t.jsx(w,{})}),t.jsx("input",{type:"file",ref:m,style:{display:"none"},onChange:A}),t.jsx("button",{onClick:()=>C(e.public_id,e._id),style:{border:"none"},children:t.jsx(F,{})})]})]},o)):t.jsx("p",{children:"No Images"})})]})]})};export{N as default};
