import{r as l,b as f,a as H,u as L,j as e,s as D,G as R,t as T,M as z,m as F,v as G,w as q,x as J,y as K}from"./index-35bd031f.js";import{_ as Q}from"./PuffLoader-306e1049.js";const U=()=>{const[n,y]=l.useState([]),[V,$]=l.useState(null),[W,N]=l.useState(null),[A,m]=l.useState(!1);l.useState(""),l.useState(""),l.useState("");const d=f(s=>s.LoggedInMiddleware),u=(d==null?void 0:d.user)&&d.user[0].salonId,b=l.useRef(null);l.useEffect(()=>((async()=>{try{b.current&&b.current.abort();const a=new AbortController;b.current=a;const t=a.signal;m(!0);const o=await F.post(`/api/barber/getAllBarberBySalonId?salonId=${Number(u)}`,{},{signal:t});y(o.data),$(o.data.currentPage),N(o.data.totalPages),m(!1)}catch(a){console.log(a)}})(),()=>{b.current.abort()}),[Number(u)]);const x=H(),B=()=>{x("/barber/createbarber")},p=L(),w=(s,a)=>{window.confirm("Are you sure ?")&&p(G(s,a))},[I,C]=l.useState(new Map),j=(s,a,t)=>{const o={salonId:s,email:a,isApproved:t};C(c=>new Map([...c,[`${s}-${a}`,t]])),p(q(o))},_=s=>{x("/barber/updatebarber",{state:{barberemail:s}})},[i,M]=l.useState([]),S=(s,a)=>{const o=s.target.checked?[...i,a.email]:i.filter(c=>c!==a.email);M(o)},O=()=>{x("/barber/dashboard2/multiplenotification",{state:i})},[h,g]=l.useState(new Map);l.useEffect(()=>{if(n!=null&&n.getAllBarbers){const s=new Map;n.getAllBarbers.forEach(a=>{const t=`${a.salonId}-${a.barberId}`;s.set(t,a.isOnline||!1)}),g(s)}},[n]);const E=(s,a)=>{g(o=>{const c=new Map(o),k=`${a}-${s}`,P=!c.get(k)||!1;return c.set(k,P),c});const t={barberId:s,salonId:a,isOnline:!h.get(`${a}-${s}`)||!1};console.log(t),p(J(t))};console.log("Current Barber List ",n);const v=f(s=>s.color.darkmode);console.log("Darkmode dashboard",v);const r=v==="On";return e.jsxs("div",{className:`barberlist-wrapper ${r?"barberlist-wrapper_dark":""}`,children:[e.jsxs("div",{className:"barberlist-header",children:[e.jsxs("div",{children:[e.jsx("h3",{style:{color:r?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Barbers List"}),e.jsx("div",{className:"notify-buttons",children:e.jsx("button",{disabled:i.length==0,onClick:()=>O(),style:{background:"#fff",border:"none",borderRadius:"5px",height:"3rem",marginLeft:"1rem",fontSize:"1.8rem",boxShadow:"0px 0px 4px rgba(0,0,0,0.4)",display:"flex",justifyContent:"cenetr",alignItems:"center",color:`${i.length===0?"gray":"red"}`},children:e.jsx(D,{})})})]}),e.jsxs("div",{children:[e.jsx("button",{style:{background:"#f16fc",width:"1px",height:"1px"}}),e.jsx("div",{}),e.jsx("div",{onClick:B,style:{cursor:"point"},children:e.jsx(R,{})})]})]}),e.jsxs("div",{className:`table ${r?"table_dark":""}`,children:[e.jsxs("main",{className:`barberitem-head ${r&&"barberitem-head_dark"}`,children:[e.jsx("div",{children:e.jsx("p",{})}),e.jsx("div",{children:e.jsx("div",{children:e.jsx("h4",{style:{color:r?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Salon ID"})})}),e.jsx("div",{children:e.jsx("div",{children:e.jsx("h4",{style:{color:r?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Barber Name"})})}),e.jsx("div",{children:e.jsx("div",{children:e.jsx("h4",{style:{color:r?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"Email"})})}),e.jsx("h4",{className:"barber-isActive",style:{color:r?"var(--light-secondary-color)":"var(--dark-secondary-color)"},children:"isOnline"})]}),A?e.jsx("div",{className:"puff-loader-box",children:e.jsx(Q,{})}):n&&n.getAllBarbers?n==null?void 0:n.getAllBarbers.map((s,a)=>e.jsxs("main",{className:`barberlist-barberitem ${r?"barberlist-barberitem_dark":""}`,children:[e.jsx("div",{children:e.jsx("input",{type:"checkbox",onChange:t=>S(t,s)})}),e.jsx("div",{children:e.jsx("p",{className:`barberlist-barberitem_text ${r?"barberlist-barberitem_text_dark":""}`,children:s.salonId})}),e.jsx("div",{children:e.jsx("p",{className:`barberlist-barberitem_text ${r?"barberlist-barberitem_text_dark":""}`,children:s.name})}),e.jsx("div",{children:e.jsx("p",{className:`barberlist-barberitem_text ${r?"barberlist-barberitem_text_dark":""}`,children:s.email})}),e.jsx("div",{style:{background:"none",boxShadow:"none",fontSize:"1.2rem",width:"100%"},children:e.jsxs("label",{className:"nav2toggle_switch",children:[e.jsx("input",{type:"checkbox",checked:h.get(`${s.salonId}-${s.barberId}`)||!1,onClick:()=>E(s.barberId,s.salonId,s.isOnline)}),e.jsx("span",{className:"nav2slider"}),e.jsx("span",{className:`nav2slider ${h.get(`${s.salonId}-${s.barberId}`)?"checked":""}`,style:{background:h.get(`${s.salonId}-${s.barberId}`)?"#4CBB17":""}})]})}),I.get(`${s.salonId}-${s.email}`)||s.isApproved?e.jsx("button",{className:"approve-bbr",onClick:()=>j(s.salonId,s.email,!1),style:{background:"gray"},children:"Approved"}):e.jsx("button",{className:"approve-bbr",onClick:()=>j(s.salonId,s.email,!0),style:{background:"white"},children:"Approve"}),e.jsx("button",{className:"edit-bbr",onClick:()=>_(s.email),children:e.jsx(T,{})}),e.jsx("button",{className:"del-bbr",onClick:()=>w(s.salonId,s.email),style:{color:"red"},children:e.jsx(z,{})})]},a)):e.jsx("div",{className:"no-barber-box",children:e.jsx("p",{className:`barberlist-barberitem_text ${r?"barberlist-barberitem_text_dark":""}`,children:"No Barbers Present"})})]})]})},Z=()=>e.jsxs(e.Fragment,{children:[e.jsx(K,{title:""}),e.jsx(U,{})]});export{Z as default};
